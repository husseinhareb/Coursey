<!-- src/app/course-detail/course-detail.component.html -->

<!-- Loading & Error -->
<div *ngIf="loadingCourse" class="loading">
  <i class="fas fa-spinner fa-spin"></i>
  {{ 'COURSE_DETAIL.LOADING' | translate }}
</div>
<div *ngIf="courseError" class="error">
  <i class="fas fa-exclamation-triangle"></i>
  {{ courseError || ('COURSE_DETAIL.ERROR' | translate) }}
</div>

<!-- Course Info -->
<div *ngIf="course" class="course-header">
  <div class="course-title-wrapper">
    <h2 class="course-title"><i class="fas fa-graduation-cap"></i> {{ course.title }}</h2>
    <button
      class="btn btn--forum"
      [routerLink]="['/courses', courseId, 'forums']"
    >
      <i class="fas fa-comments"></i>
      {{ 'COURSE_DETAIL.VIEW_FORUM' | translate }}
    </button>
  </div>
  <p class="course-description">{{ course.description }}</p>
</div>


<!-- Add / Edit Post -->
<div class="post-controls" *ngIf="canModifyPosts">
  <button
    class="btn btn--add-post"
    (click)="toggleForm()"
  >
    <i class="fas" [ngClass]="editing ? 'fa-edit' : 'fa-plus-circle'"></i>
    {{ editing
       ? ('COURSE_DETAIL.EDIT_POST'   | translate)
       : ('COURSE_DETAIL.ADD_POST'    | translate)
    }}
  </button>
</div>

<div *ngIf="showForm && canModifyPosts" class="post-form">
  <!-- …your existing <form> here… -->
</div>

<hr class="section-divider" />

<!-- Posts list -->
<app-posts
  [posts]="posts"
  [loading]="loadingPosts"
  [error]="postsError"
  [courseId]="courseId"
  [isStudentInCourse]="isStudentInCourse"
  [studentSubmissions]="studentSubmissions"
  [canModifyPosts]="canModifyPosts"
  [showSubmissionFormForPostId]="showSubmissionFormForPostId"
  [showOwnSubmissionListForPostId]="showOwnSubmissionListForPostId"
  [showSubmissionListForPostId]="showSubmissionListForPostId"
  (toggleSubmissionForm)="toggleSubmissionForm($event)"
  (viewOwnSubmission)="showOwnSubmissionListForPostId = $event"
  (toggleSubmissionList)="toggleSubmissionList($event)"
  (togglePin)="togglePin($event)"
  (moveUp)="moveUp($event)"
  (moveDown)="moveDown($event)"
  (editPost)="toggleForm($event)"
  (deletePost)="deletePost($event)"
></app-posts>
