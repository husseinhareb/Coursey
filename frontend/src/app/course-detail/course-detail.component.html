<!-- course-detail header & form -->
<div *ngIf="loadingCourse" class="loading">Loading course…</div>
<div *ngIf="courseError" class="error">{{ courseError }}</div>

<div *ngIf="course">
  <h2>{{ course.title }}</h2>
  <p>{{ course.description }}</p>

  <!-- forum button -->
  <button
    class="forum-link"
    [routerLink]="['/courses', courseId, 'forums']"
  >
    View Course Forum
  </button>
</div>

<hr />

<button *ngIf="canModifyPosts" (click)="toggleForm()">
  {{ editing ? 'Edit Post' : '+ Add Post' }}
</button>

<div *ngIf="showForm && canModifyPosts" class="post-form">
  <!-- …your existing <form> here (unchanged)… -->
</div>

<hr />

<!-- pull in the standalone posts list -->
<app-posts
  [posts]="posts"
  [loading]="loadingPosts"
  [error]="postsError"
  [courseId]="courseId"
  [isStudentInCourse]="isStudentInCourse"
  [studentSubmissions]="studentSubmissions"
  [canModifyPosts]="canModifyPosts"
  [showSubmissionFormForPostId]="showSubmissionFormForPostId"
  [showOwnSubmissionListForPostId]="showOwnSubmissionListForPostId"
  [showSubmissionListForPostId]="showSubmissionListForPostId"
  (toggleSubmissionForm)="toggleSubmissionForm($event)"
  (viewOwnSubmission)="showOwnSubmissionListForPostId = $event"
  (toggleSubmissionList)="toggleSubmissionList($event)"
  (togglePin)="togglePin($event)"
  (moveUp)="moveUp($event)"
  (moveDown)="moveDown($event)"
  (editPost)="toggleForm($event)"
  (deletePost)="deletePost($event)"
></app-posts>
