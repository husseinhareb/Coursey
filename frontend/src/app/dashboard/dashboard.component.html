<!-- Loading -->
<div *ngIf="loading" class="status">
  <i class="fas fa-spinner fa-spin"></i>
  {{ 'DASH.LOADING' | translate }}
</div>

<!-- Error -->
<div *ngIf="!loading && error" class="status status--error">
  <i class="fas fa-exclamation-triangle"></i>
  {{ error }}
</div>

<ng-container *ngIf="!loading && overview">

  <!-- STUDENT VIEW -->
  <ng-container *ngIf="role === 'student'">
    <h2><i class="fas fa-graduation-cap"></i> {{ 'DASH.MY_COURSES' | translate }}</h2>

    <div *ngIf="enrolledCourses.length === 0" class="empty">
      <i class="fas fa-book-reader"></i>
      {{ 'DASH.NO_COURSES' | translate }}
    </div>

    <ul *ngIf="enrolledCourses.length > 0" class="student-list">
      <li *ngFor="let c of enrolledCourses">
        <i class="fas fa-book-open"></i>
        {{ c.code }} — {{ c.title }}
        <div class="progress-bar">
          <div class="fill" [style.width.%]="c.progress"></div>
        </div>
        <small>{{ c.progress }}%</small>
      </li>
    </ul>
  </ng-container>

  <!-- TEACHER VIEW -->
  <ng-container *ngIf="role === 'teacher'">
    <h2><i class="fas fa-chalkboard-teacher"></i> {{ 'DASH.MY_CREATED_COURSES' | translate }}</h2>

    <div *ngIf="teacherCourses.length === 0" class="empty">
      <i class="fas fa-chalkboard"></i>
      {{ 'DASH.NO_CREATED_COURSES' | translate }}
    </div>

    <ul *ngIf="teacherCourses.length > 0" class="teacher-list">
      <li *ngFor="let c of teacherCourses">
        <i class="fas fa-book"></i>
        {{ c.code }} — {{ c.title }}
        <span class="badge">
          {{ c.enrolledCount }} {{ 'DASH.STUDENTS' | translate }}
        </span>
      </li>
    </ul>
  </ng-container>

  <!-- ADMIN VIEW -->
  <ng-container *ngIf="role === 'admin'">
    <h2><i class="fas fa-tachometer-alt"></i> {{ 'NAV.DASHBOARD' | translate }}</h2>

    <section class="cards">
      <div class="card">
        <i class="fas fa-users fa-2x"></i>
        <div class="card-info">
          <h3>{{ 'DASH.USERS' | translate }}</h3>
          <p>{{ adminTotals.users }}</p>
        </div>
      </div>
      <div class="card">
        <i class="fas fa-book fa-2x"></i>
        <div class="card-info">
          <h3>{{ 'DASH.COURSES' | translate }}</h3>
          <p>{{ adminTotals.courses }}</p>
        </div>
      </div>
      <div class="card">
        <i class="fas fa-file-alt fa-2x"></i>
        <div class="card-info">
          <h3>{{ 'DASH.POSTS' | translate }}</h3>
          <p>{{ adminTotals.posts }}</p>
        </div>
      </div>
    </section>

    <section class="charts">
      <div class="chart-card">
        <h3><i class="fas fa-file-upload"></i> {{ 'DASH.SUBMISSIONS' | translate }}</h3>
        <canvas
          baseChart
          [data]="submissionsData"
          [options]="submissionsOptions"
          chartType="doughnut">
        </canvas>
      </div>
      <div class="chart-card">
        <h3><i class="fas fa-chart-bar"></i> {{ 'DASH.ACTIVITY_7D' | translate }}</h3>
        <canvas
          baseChart
          [data]="activityChartData"
          [options]="activityOptions"
          chartType="bar">
        </canvas>
      </div>
    </section>
  </ng-container>

</ng-container>
