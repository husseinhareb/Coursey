<!-- src/app/register/register.component.html -->

<h2>{{ 'SIGNUP.TITLE' | translate }}</h2>

<!-- Show form until success -->
<ng-container *ngIf="!signupSuccess">
  <form [formGroup]="signupForm" (ngSubmit)="onSubmit()">
    <!-- Email -->
    <label for="email">{{ 'SIGNUP.EMAIL_LABEL' | translate }}</label>
    <input
      id="email"
      type="email"
      formControlName="email"
      placeholder="{{ 'SIGNUP.EMAIL_PLACEHOLDER' | translate }}"
    />
    <div
      *ngIf="signupForm.get('email')?.invalid && signupForm.get('email')?.touched"
      class="error"
    >
      {{ 'SIGNUP.EMAIL_ERROR' | translate }}
    </div>

    <!-- First Name -->
    <label for="firstName">{{ 'SIGNUP.FIRST_NAME_LABEL' | translate }}</label>
    <input
      id="firstName"
      type="text"
      formControlName="firstName"
      placeholder="{{ 'SIGNUP.FIRST_NAME_PLACEHOLDER' | translate }}"
    />
    <div
      *ngIf="signupForm.get('firstName')?.invalid && signupForm.get('firstName')?.touched"
      class="error"
    >
      {{ 'SIGNUP.FIRST_NAME_ERROR' | translate }}
    </div>

    <!-- Last Name -->
    <label for="lastName">{{ 'SIGNUP.LAST_NAME_LABEL' | translate }}</label>
    <input
      id="lastName"
      type="text"
      formControlName="lastName"
      placeholder="{{ 'SIGNUP.LAST_NAME_PLACEHOLDER' | translate }}"
    />
    <div
      *ngIf="signupForm.get('lastName')?.invalid && signupForm.get('lastName')?.touched"
      class="error"
    >
      {{ 'SIGNUP.LAST_NAME_ERROR' | translate }}
    </div>

    <!-- Role -->
    <label for="role">{{ 'SIGNUP.ROLE_LABEL' | translate }}</label>
    <select id="role" formControlName="role">
      <option value="" disabled>
        {{ 'SIGNUP.ROLE_PLACEHOLDER' | translate }}
      </option>
      <option value="student">{{ 'SIGNUP.ROLE_STUDENT' | translate }}</option>
      <option value="professor">{{ 'SIGNUP.ROLE_PROFESSOR' | translate }}</option>
      <option value="admin">{{ 'SIGNUP.ROLE_ADMIN' | translate }}</option>
    </select>
    <div
      *ngIf="signupForm.get('role')?.invalid && signupForm.get('role')?.touched"
      class="error"
    >
      {{ 'SIGNUP.ROLE_ERROR' | translate }}
    </div>

    <!-- Submit -->
    <button type="submit" [disabled]="signupForm.invalid">
      {{ 'SIGNUP.SUBMIT' | translate }}
    </button>
  </form>
</ng-container>

<!-- Success message (no redirect) -->
<div *ngIf="signupSuccess" class="success">
  {{ 'SIGNUP.SUCCESS' | translate }}
</div>

<!-- Error message -->
<div *ngIf="signupError" class="error">
  {{ signupError }}
</div>
